<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anuradha Printing Press</title>
    
    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Cropper.js CDN -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>

    <style>
        /* --- Global Styles & Design Overhaul --- */
        :root {
            --primary-color: #e83e8c; /* A more vibrant, modern pink */
            --secondary-color: #6c757d;
            --success-color: #198754;
            --danger-color: #dc3545;
            --light-gray: #f8f9fa;
            --dark-color: #212529;
            --background-color: #ffffff;
            --body-bg-color: #f9f9f9; /* Subtle off-white background */
            --text-color: #333;
            --border-radius: 12px;
            --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 8px 25px rgba(0, 0, 0, 0.12);
            --transition-speed: 0.3s;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--body-bg-color);
            color: var(--text-color);
            line-height: 1.6;
            scroll-behavior: smooth;
        }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        /* --- Enhanced Header --- */
        .header {
            background-color: var(--background-color);
            padding: 15px 0;
            box-shadow: var(--box-shadow);
            position: sticky; top: 0; z-index: 1000;
        }
        .header .container { display: flex; justify-content: space-between; align-items: center; }
        .logo { display: flex; align-items: center; text-decoration: none; gap: 12px; }
        .logo img { height: 50px; width: auto; }
        .logo-text { font-size: 1.4em; font-weight: 600; color: var(--dark-color); }
        .cart-button { background: none; border: none; cursor: pointer; position: relative; padding: 10px; }
        .cart-button svg { width: 28px; height: 28px; fill: var(--dark-color); }
        .cart-count { position: absolute; top: 0; right: 0; background-color: var(--primary-color); color: white; border-radius: 50%; width: 22px; height: 22px; font-size: 12px; font-weight: 600; display: flex; align-items: center; justify-content: center; transform: scale(0); transition: transform 0.2s ease-in-out; }
        .cart-count.visible { transform: scale(1); }

        /* --- Hero Section --- */
        .hero { text-align: center; padding: 80px 20px; background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%); color: white; }
        .hero h1 { font-size: 3em; font-weight: 700; margin-bottom: 10px; }
        .hero p { font-size: 1.2em; max-width: 600px; margin: 0 auto; opacity: 0.9; }

        /* --- Product Catalog --- */
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 35px; padding: 50px 0; }
        .product-card { background-color: var(--background-color); border-radius: var(--border-radius); box-shadow: var(--box-shadow); overflow: hidden; transition: transform var(--transition-speed), box-shadow var(--transition-speed); display: flex; flex-direction: column; }
        .product-card:hover { transform: translateY(-10px); box-shadow: var(--box-shadow-hover); }
        .product-image-container { position: relative; width: 100%; padding-top: 100%; }
        .product-image { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; transition: opacity var(--transition-speed) ease-in-out; }
        .product-image-hover { opacity: 0; }
        .product-card:hover .product-image-default { opacity: 0; }
        .product-card:hover .product-image-hover { opacity: 1; }
        .product-info { padding: 25px; text-align: center; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-name { font-size: 1.15em; font-weight: 600; margin-bottom: 10px; color: var(--dark-color); }
        .product-price { font-size: 1.5em; font-weight: 700; color: var(--primary-color); margin-bottom: 20px; }

        /* --- General Button Styles --- */
        .btn { display: inline-block; padding: 12px 28px; border: none; border-radius: var(--border-radius); cursor: pointer; font-size: 1em; font-weight: 600; text-align: center; text-decoration: none; transition: all var(--transition-speed); }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-primary:hover { background-color: #c21a6a; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(232, 62, 140, 0.4); }
        .btn-success { background-color: var(--success-color); color: white; }
        .btn-success:hover { background-color: #157347; transform: translateY(-2px); box-shadow: 0 4px 10px rgba(25, 135, 84, 0.4); }
        .btn-secondary { background-color: var(--secondary-color); color: white; }
        .btn-danger { background-color: var(--danger-color); color: white; }
        
        /* --- Modal Styles --- */
        .modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px); align-items: center; justify-content: center; }
        .modal.active { display: flex; }
        .modal-content { background-color: var(--background-color); margin: auto; padding: 35px; border-radius: var(--border-radius); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); width: 90%; max-width: 500px; position: relative; animation: slide-down 0.4s ease-out; }
        @keyframes slide-down { from { transform: translateY(-30px) scale(0.95); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
        .modal-close { color: #aaa; position: absolute; top: 15px; right: 20px; font-size: 32px; font-weight: bold; cursor: pointer; line-height: 1; }
        .modal-header { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .modal-title { font-size: 1.8em; font-weight: 600; color: var(--primary-color); text-align: center; }
        .modal-body { margin-bottom: 25px; }
        .modal-footer { display: flex; justify-content: flex-end; gap: 10px; }

        /* --- Customizer, Cart, Checkout --- */
        .customizer-step { display: none; }
        .customizer-step.active { display: block; }
        .step-title { font-size: 1.4em; font-weight: 600; margin-bottom: 20px; text-align: center; }
        .upload-area { border: 2px dashed #ccc; border-radius: var(--border-radius); padding: 40px 20px; text-align: center; cursor: pointer; transition: background-color var(--transition-speed), border-color var(--transition-speed); }
        .upload-area:hover { background-color: #f0f8ff; border-color: var(--primary-color); }
        #design-upload { display: none; }
        #cropper-container { width: 100%; height: 400px; background-color: var(--body-bg-color); border-radius: var(--border-radius); }
        .preview-container { width: 100%; aspect-ratio: 1/1; border: 1px solid #ddd; border-radius: var(--border-radius); position: relative; background-size: contain; background-position: center; background-repeat: no-repeat; overflow: hidden; margin: 0 auto 20px; }
        .preview-design { position: absolute; background-size: 100% 100%; pointer-events: none; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .form-control { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 1em; font-family: 'Poppins', sans-serif; transition: border-color 0.2s, box-shadow 0.2s; }
        .form-control:focus { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(232, 62, 140, 0.2); outline: none; }
        .form-control:disabled { background-color: #e9ecef; cursor: not-allowed; }
        
        #cart-modal .modal-content { max-width: 650px; }
        #cart-items-container { max-height: 400px; overflow-y: auto; margin-bottom: 20px; }
        .cart-item { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .cart-item-image { width: 80px; height: 80px; border-radius: var(--border-radius); margin-right: 15px; object-fit: cover; }
        
        /* --- WhatsApp Instruction Modal --- */
        #whatsapp-instruction-modal .modal-content { text-align: center; }
        #whatsapp-instruction-modal p { font-size: 1.1em; line-height: 1.7; margin-bottom: 15px; }
        #whatsapp-instruction-modal .hindi-text { font-size: 1em; color: var(--secondary-color); margin-top: -10px; margin-bottom: 20px; }
        #payment-instruction { display: none; /* Shown via JS */ }

        /* --- Footer --- */
        .footer { text-align: center; padding: 40px 20px; margin-top: 40px; background-color: var(--dark-color); color: var(--light-gray); }
        .footer h3 { font-size: 1.6em; font-weight: 600; color: white; margin-bottom: 15px; }
        .footer p { margin-bottom: 10px; line-height: 1.8; opacity: 0.8; }
        .footer .contact-info { font-weight: 500; }
        .footer .copyright { margin-top: 30px; font-size: 0.9em; opacity: 0.6; }

        /* --- Responsive Tweaks --- */
        @media (max-width: 768px) { .hero h1 { font-size: 2.5em; } }
        @media (max-width: 480px) {
            .logo img { height: 40px; }
            .logo-text { font-size: 1.1em; }
            .hero h1 { font-size: 2.2em; }
            .modal-content { padding: 25px; }
            .modal-footer { flex-direction: column; gap: 10px; }
            .modal-footer .btn { width: 100%; }
            .cart-item { flex-direction: column; align-items: flex-start; text-align: left; }
            .cart-item-image { margin-bottom: 10px; }
            .cart-item-remove { margin-left: 0; margin-top: 10px; width: 100%; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <a href="#" class="logo">
                <img src="https://i.postimg.cc/hPqH9jzQ/Chat-GPT-Image-Jul-11-2025-09-47-56-PM.png" alt="Anuradha Printing Press Logo">
                <span class="logo-text">Anuradha Printing Press</span>
            </a>
            <button class="cart-button" id="cart-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z" /></svg>
                <span class="cart-count" id="cart-count">0</span>
            </button>
        </div>
    </header>

    <main>
        <section class="hero">
            <h1>Your Design, Our Passion</h1>
            <p>High-quality custom printing for all your needs, delivered to your doorstep.</p>
        </section>
        <div class="container"><div id="product-grid" class="product-grid"></div></div>
    </main>

    <footer class="footer">
        <h3>Anuradha Printing Press</h3>
        <p>Prop: Ajay Kumar</p>
        <p>📍 Location: Panjwara, Niyar Chaiti Durga Mandir</p>
        <p class="contact-info">📞 7360847744, 7370998909</p>
        <p class="copyright">&copy; 2024 Anuradha Printing Press. All Rights Reserved.</p>
    </footer>

    <!-- Modals -->
    <div id="customizer-modal" class="modal"><div class="modal-content"><span class="modal-close" data-close="customizer-modal">&times;</span><div class="modal-header"><h2 class="modal-title" id="customizer-title"></h2></div><div class="modal-body"><div id="step-1" class="customizer-step"><h3 class="step-title">Step 1: Upload Your Design</h3><label for="design-upload"><div class="upload-area"><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" viewBox="0 0 16 16"><path d="M8 2a5.53 5.53 0 0 0-3.594 1.342c-.766.66-1.321 1.52-1.464 2.383C1.266 6.095 0 7.555 0 9.318 0 11.366 1.708 13 3.781 13h8.906C14.502 13 16 11.57 16 9.773c0-1.636-1.242-2.969-2.834-3.194C12.923 3.999 10.69 2 8 2zm2.354 5.146a.5.5 0 0 1-.708.708L8.5 6.707V10.5a.5.5 0 0 1-1 0V6.707L6.354 7.854a.5.5 0 1 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2z"/></svg><p>Click to browse or drag & drop</p></div></label><input type="file" id="design-upload" accept="image/*"></div><div id="step-2" class="customizer-step"><h3 class="step-title">Step 2: Crop & Adjust</h3><div id="cropper-container"><img id="image-to-crop"></div></div><div id="step-3" class="customizer-step"><h3 class="step-title">Step 3: Preview & Finalize</h3><div id="preview-container"><div id="preview-design" class="preview-design"></div></div><div id="dynamic-options-container"></div></div></div><div class="modal-footer"><button id="customizer-back-btn" class="btn btn-secondary" style="display: none;">Back</button><button id="customizer-next-btn" class="btn btn-primary" style="display: none;">Next</button><button id="add-to-cart-btn" class="btn btn-success" style="display: none;">Add to Cart</button></div></div></div>
    <div id="cart-modal" class="modal"><div class="modal-content"><span class="modal-close" data-close="cart-modal">&times;</span><div class="modal-header"><h2 class="modal-title">Your Shopping Cart</h2></div><div class="modal-body"><div id="cart-items-container"></div><p id="cart-empty-message" style="display: none;">Your cart is empty.</p><div id="cart-total-container" class="cart-total" style="display: none;">Total: <span id="cart-total-price"></span></div></div><div class="modal-footer" id="cart-footer"><button class="btn btn-secondary" data-close="cart-modal">Continue Shopping</button><button id="checkout-btn" class="btn btn-primary">Proceed to Checkout</button></div></div></div>
    <div id="checkout-modal" class="modal"><div class="modal-content"><span class="modal-close" data-close="checkout-modal">&times;</span><div class="modal-header"><h2 class="modal-title">Checkout</h2></div><form id="checkout-form"><div class="modal-body"><div class="form-group"><label for="customer-name">Full Name</label><input type="text" id="customer-name" class="form-control" required></div><div class="form-group"><label for="customer-phone">Phone Number (for WhatsApp)</label><input type="tel" id="customer-phone" class="form-control" required></div><div class="form-group"><label for="customer-address">Shipping Address</label><textarea id="customer-address" class="form-control" rows="3" required></textarea></div><div class="form-group"><label>Payment Method</label><div class="payment-options" style="display:flex;gap:10px;"><div style="flex:1;"><input type="radio" id="payment-cod" name="payment-method" value="COD" checked style="display:none;"><label for="payment-cod" style="display:block;padding:15px;border:1px solid #ccc;border-radius:8px;text-align:center;cursor:pointer;">Cash on Delivery</label></div><div style="flex:1;"><input type="radio" id="payment-online" name="payment-method" value="Online" style="display:none;"><label for="payment-online" style="display:block;padding:15px;border:1px solid #ccc;border-radius:8px;text-align:center;cursor:pointer;">Online Payment</label></div></div></div><div id="online-payment-details" style="display:none;"><p style="text-align: center; font-weight: 500;">Pay and enter the transaction ID.</p><img id="qr-code-img" alt="QR Code" style="display:block;margin:15px auto;max-width:180px;"><p id="upi-id" style="text-align:center;font-weight:bold;"></p><div class="form-group"><label for="transaction-id">UTR / Transaction ID</label><input type="text" id="transaction-id" class="form-control"></div><div class="form-group"><label for="payment-screenshot">Payment Screenshot</label><input type="file" id="payment-screenshot" class="form-control" accept="image/*"><small style="color: var(--secondary-color); display: block; margin-top: 5px;">You will be asked to send the screenshot on WhatsApp.</small></div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-close="checkout-modal">Cancel</button><button type="submit" id="place-order-btn" class="btn btn-success">Place Order via WhatsApp</button></div></form></div></div>
    <div id="whatsapp-instruction-modal" class="modal"><div class="modal-content"><span class="modal-close" data-close="whatsapp-instruction-modal">&times;</span><div class="modal-header"><h2 class="modal-title">Final Step!</h2></div><div class="modal-body"><p>Please send your design image in the WhatsApp chat so we can process your order.</p><p class="hindi-text">कृपया अपनी डिज़ाइन की इमेज हमें व्हाट्सएप पर भेजें ताकि हम आपका ऑर्डर तैयार कर सकें।</p><div id="payment-instruction"><p>Also send your payment screenshot with the UTR/Transaction ID.</p><p class="hindi-text">कृपया भुगतान का स्क्रीनशॉट और UTR/ट्रांजेक्शन आईडी भी भेजें।</p></div></div><div class="modal-footer" style="justify-content:center;"><button id="continue-to-whatsapp-btn" class="btn btn-success">Continue to WhatsApp</button></div></div></div>
    <div id="toast-notification" class="toast"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    // --- CONFIGURATION ---
    const BUSINESS_WHATSAPP_NUMBER = "917360847744"; 
    const CURRENCY_SYMBOL = "₹";
    const QR_CODE_IMAGE = "https://i.postimg.cc/Xv5DDvtq/IMG-20250711-WA0031.jpg";
    const UPI_ID = "a60063817-1@okaxis";

    // --- ADVANCED PHONE MODEL DATA ---
    const phoneModelsData = {
        'Apple': ['iPhone 15 Pro Max', 'iPhone 15 Pro', 'iPhone 15 Plus', 'iPhone 15', 'iPhone 14 Pro Max', 'iPhone 14 Pro', 'iPhone 14 Plus', 'iPhone 14', 'iPhone 13', 'iPhone 12', 'iPhone 11', 'iPhone SE (3rd gen)'],
        'Samsung': ['Galaxy S24 Ultra', 'Galaxy S24+', 'Galaxy S24', 'Galaxy S23 FE', 'Galaxy S23 Ultra', 'Galaxy S23', 'Galaxy Z Fold5', 'Galaxy Z Flip5', 'Galaxy A55', 'Galaxy A35', 'Galaxy M34'],
        'Google': ['Pixel 8 Pro', 'Pixel 8', 'Pixel 7a', 'Pixel 7 Pro', 'Pixel 7'],
        'OnePlus': ['OnePlus 12', 'OnePlus 12R', 'OnePlus 11', 'OnePlus Nord 3', 'OnePlus Nord CE 4'],
        'Xiaomi': ['Xiaomi 14', 'Xiaomi 13 Pro', 'Redmi Note 13 Pro+', 'Redmi Note 13', 'Poco X6 Pro'],
    };

    // --- FULL PRODUCT DATA ---
    const products = [
        { id: 't-shirt-01', name: 'Custom Photo T-Shirt', price: 499, image_plain: 'https://i.postimg.cc/d0BpZxh7/Chat-GPT-Image-Jul-11-2025-02-45-15-PM.png', image_customized: 'https://i.postimg.cc/Xqz0GDDK/Chat-GPT-Image-Jul-11-2025-03-30-47-PM.png', aspect_ratio: 3 / 4, options: { type: 'select', name: 'Size', values: ['S', 'M', 'L', 'XL', 'XXL'] }, preview_style: 'top: 25%; left: 33%; width: 34%; height: 45%;' },
        { id: 't-shirt-02', name: 'Graphic T-Shirt', price: 399, image_plain: 'https://i.postimg.cc/ryhSSJ3F/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-1.jpg', image_customized: 'https://i.postimg.cc/ryhSSJ3F/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-1.jpg', aspect_ratio: 3 / 4, options: { type: 'select', name: 'Size', values: ['S', 'M', 'L', 'XL', 'XXL'] }, preview_style: 'top: 25%; left: 33%; width: 34%; height: 45%;' },
        { id: 't-shirt-03', name: 'Couple T-Shirt Set', price: 799, image_plain: 'https://i.postimg.cc/Qxw1zMj2/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-1.jpg', image_customized: 'https://i.postimg.cc/Qxw1zMj2/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-1.jpg', aspect_ratio: 3 / 4, options: { type: 'select', name: 'Size', values: ['S+M', 'M+L', 'L+XL'] }, preview_style: 'top: 25%; left: 33%; width: 34%; height: 45%;' },
        { id: 't-shirt-04', name: 'Family T-Shirt', price: 449, image_plain: 'https://i.postimg.cc/KvRtQTh7/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-1.jpg', image_customized: 'https://i.postimg.cc/KvRtQTh7/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-1.jpg', aspect_ratio: 3 / 4, options: { type: 'select', name: 'Size', values: ['S', 'M', 'L', 'XL', 'XXL'] }, preview_style: 'top: 25%; left: 33%; width: 34%; height: 45%;' },
        { id: 't-shirt-05', name: 'Pet Photo T-Shirt', price: 449, image_plain: 'https://i.postimg.cc/rw4x2LmK/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-1.jpg', image_customized: 'https://i.postimg.cc/rw4x2LmK/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-1.jpg', aspect_ratio: 3 / 4, options: { type: 'select', name: 'Size', values: ['S', 'M', 'L', 'XL', 'XXL'] }, preview_style: 'top: 25%; left: 33%; width: 34%; height: 45%;' },
        { id: 'bottle-01', name: 'Custom Steel Bottle', price: 599, image_plain: 'https://i.postimg.cc/Dw5R8NJS/Chat-GPT-Image-Jul-11-2025-03-01-46-PM.png', image_customized: 'https://i.postimg.cc/QN9DvjB0/Chat-GPT-Image-Jul-11-2025-03-22-54-PM.png', aspect_ratio: 2 / 5, options: null, preview_style: 'top: 25%; left: 25%; width: 50%; height: 50%;' },
        { id: 'bottle-02', name: 'Sports Water Bottle', price: 499, image_plain: 'https://i.postimg.cc/tJLJBYFD/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-2.jpg', image_customized: 'https://i.postimg.cc/tJLJBYFD/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-2.jpg', aspect_ratio: 2 / 5, options: null, preview_style: 'top: 25%; left: 25%; width: 50%; height: 50%;' },
        { id: 'bottle-03', name: 'Kids Water Bottle', price: 399, image_plain: 'https://i.postimg.cc/tCxYYNHc/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-2.jpg', image_customized: 'https://i.postimg.cc/tCxYYNHc/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-2.jpg', aspect_ratio: 2 / 5, options: null, preview_style: 'top: 25%; left: 25%; width: 50%; height: 50%;' },
        { id: 'bottle-04', name: 'Thermal Flask', price: 699, image_plain: 'https://i.postimg.cc/kgPD8RJg/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-2.jpg', image_customized: 'https://i.postimg.cc/kgPD8RJg/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-2.jpg', aspect_ratio: 2 / 5, options: null, preview_style: 'top: 25%; left: 25%; width: 50%; height: 50%;' },
        { id: 'bottle-05', name: 'Sleek Black Bottle', price: 549, image_plain: 'https://i.postimg.cc/ht8v04vb/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-2.jpg', image_customized: 'https://i.postimg.cc/ht8v04vb/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-2.jpg', aspect_ratio: 2 / 5, options: null, preview_style: 'top: 25%; left: 25%; width: 50%; height: 50%;' },
        { id: 'mug-01', name: 'Custom Photo Mug', price: 299, image_plain: 'https://i.postimg.cc/L4Q5DrcL/Chat-GPT-Image-Jul-11-2025-03-45-47-PM.png', image_customized: 'https://i.postimg.cc/rsD87wBW/file-00000000f3346230b33458d933e1c8e9.png', aspect_ratio: 4 / 3, options: null, preview_style: 'top: 25%; left: 15%; width: 70%; height: 50%;' },
        { id: 'mug-02', name: 'Love Themed Mug', price: 349, image_plain: 'https://i.postimg.cc/jd4CHdL6/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-3.jpg', image_customized: 'https://i.postimg.cc/jd4CHdL6/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-3.jpg', aspect_ratio: 4 / 3, options: null, preview_style: 'top: 25%; left: 15%; width: 70%; height: 50%;' },
        { id: 'mug-03', name: 'Magic Mug', price: 399, image_plain: 'https://i.postimg.cc/kXsXV1pf/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-3.jpg', image_customized: 'https://i.postimg.cc/kXsXV1pf/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-3.jpg', aspect_ratio: 4 / 3, options: null, preview_style: 'top: 25%; left: 15%; width: 70%; height: 50%;' },
        { id: 'mug-04', name: 'Birthday Special Mug', price: 349, image_plain: 'https://i.postimg.cc/kXqgg3f2/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-3.jpg', image_customized: 'https://i.postimg.cc/kXqgg3f2/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-3.jpg', aspect_ratio: 4 / 3, options: null, preview_style: 'top: 25%; left: 15%; width: 70%; height: 50%;' },
        { id: 'mug-05', name: 'Quote Mug', price: 299, image_plain: 'https://i.postimg.cc/C5HMsmLM/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-3.jpg', image_customized: 'https://i.postimg.cc/C5HMsmLM/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-3.jpg', aspect_ratio: 4 / 3, options: null, preview_style: 'top: 25%; left: 15%; width: 70%; height: 50%;' },
        { id: 'phone-case-01', name: 'Custom Photo Case', price: 349, image_plain: 'https://i.postimg.cc/YCYQJr7J/Chat-GPT-Image-Jul-11-2025-03-52-55-PM.png', image_customized: 'https://i.postimg.cc/Zq9zTM7t/Chat-GPT-Image-Jul-11-2025-03-48-48-PM.png', aspect_ratio: 9 / 16, options: { type: 'phone_model_selector', name: 'Phone Model' }, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'phone-case-02', name: 'Collage Phone Case', price: 399, image_plain: 'https://i.postimg.cc/DzHYxh85/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-4.jpg', image_customized: 'https://i.postimg.cc/DzHYxh85/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-4.jpg', aspect_ratio: 9 / 16, options: { type: 'phone_model_selector', name: 'Phone Model' }, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'phone-case-03', name: 'Abstract Art Case', price: 349, image_plain: 'https://i.postimg.cc/tRhmNLyt/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-4.jpg', image_customized: 'https://i.postimg.cc/tRhmNLyt/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-4.jpg', aspect_ratio: 9 / 16, options: { type: 'phone_model_selector', name: 'Phone Model' }, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'phone-case-04', name: 'Floral Phone Case', price: 349, image_plain: 'https://i.postimg.cc/ncpSR0h8/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-4.jpg', image_customized: 'https://i.postimg.cc/ncpSR0h8/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-2-4.jpg', aspect_ratio: 9 / 16, options: { type: 'phone_model_selector', name: 'Phone Model' }, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'phone-case-05', name: 'Name Initial Case', price: 379, image_plain: 'https://i.postimg.cc/28GcPh11/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-4.jpg', image_customized: 'https://i.postimg.cc/28GcPh11/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-3-4.jpg', aspect_ratio: 9 / 16, options: { type: 'phone_model_selector', name: 'Phone Model' }, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'cap-01', name: 'Custom Logo Cap', price: 249, image_plain: 'https://i.postimg.cc/XJz8nszh/Chat-GPT-Image-Jul-11-2025-03-59-03-PM.png', image_customized: 'https://i.postimg.cc/XJz8nszh/Chat-GPT-Image-Jul-11-2025-03-59-03-PM.png', aspect_ratio: 2 / 1, options: null, preview_style: 'top: 25%; left: 35%; width: 30%; height: 30%;' },
        { id: 'cap-02', name: 'Team Cap', price: 299, image_plain: 'https://i.postimg.cc/brnF2Bgr/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0.jpg', image_customized: 'https://i.postimg.cc/brnF2Bgr/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0.jpg', aspect_ratio: 2 / 1, options: null, preview_style: 'top: 25%; left: 35%; width: 30%; height: 30%;' },
        { id: 'cap-03', name: 'Event Cap', price: 249, image_plain: 'https://i.postimg.cc/9F3kjcX7/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1.jpg', image_customized: 'https://i.postimg.cc/9F3kjcX7/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1.jpg', aspect_ratio: 2 / 1, options: null, preview_style: 'top: 25%; left: 35%; width: 30%; height: 30%;' },
        { id: 'keychain-01', name: 'Photo Keychain', price: 149, image_plain: 'https://i.postimg.cc/kgHYJXRw/Chat-GPT-Image-Jul-11-2025-04-06-20-PM.png', image_customized: 'https://i.postimg.cc/kgHYJXRw/Chat-GPT-Image-Jul-11-2025-04-06-20-PM.png', aspect_ratio: 1 / 1, options: null, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'keychain-02', name: 'Couple Keychain', price: 249, image_plain: 'https://i.postimg.cc/Yqw2X4VG/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-7.jpg', image_customized: 'https://i.postimg.cc/Yqw2X4VG/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-7.jpg', aspect_ratio: 1 / 1, options: null, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'keychain-03', name: 'Spotify Keychain', price: 199, image_plain: 'https://i.postimg.cc/Z5wTKwqp/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-7.jpg', image_customized: 'https://i.postimg.cc/Z5wTKwqp/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-7.jpg', aspect_ratio: 3 / 1, options: null, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'id-card-01', name: 'Employee ID Card', price: 99, image_plain: 'https://i.postimg.cc/yNh65xbD/Chat-GPT-Image-Jul-11-2025-07-42-24-PM.png', image_customized: 'https://i.postimg.cc/pr4sKWxZ/piclumen-1752242814111.png', aspect_ratio: 2/3, options: null, preview_style: 'top: 15%; left: 10%; width: 80%; height: 75%;' },
        { id: 'id-card-02', name: 'Student ID Card', price: 99, image_plain: 'https://i.postimg.cc/90n47Lx4/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-5.jpg', image_customized: 'https://i.postimg.cc/90n47Lx4/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-5.jpg', aspect_ratio: 2/3, options: null, preview_style: 'top: 15%; left: 10%; width: 80%; height: 75%;' },
        { id: 'school-bag-01', name: 'Custom School Bag', price: 899, image_plain: 'https://i.postimg.cc/1R2YGw86/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-6.jpg', image_customized: 'https://i.postimg.cc/1R2YGw86/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-0-6.jpg', aspect_ratio: 1, options: null, preview_style: 'top: 30%; left: 30%; width: 40%; height: 40%;' },
        { id: 'school-bag-02', name: 'Kids Themed Bag', price: 799, image_plain: 'https://i.postimg.cc/YqQ8QVKK/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-6.jpg', image_customized: 'https://i.postimg.cc/YqQ8QVKK/Flux-Dev-Create-a-professional-layout-featuring-three-highqual-1-6.jpg', aspect_ratio: 1, options: null, preview_style: 'top: 30%; left: 30%; width: 40%; height: 40%;' },
        { id: 'notebook-01', name: 'Custom Cover Notebook', price: 199, image_plain: 'https://i.postimg.cc/pXdzL6WJ/Flux-Dev-Create-a-professional-visual-layout-featuring-three-h-0.jpg', image_customized: 'https://i.postimg.cc/pXdzL6WJ/Flux-Dev-Create-a-professional-visual-layout-featuring-three-h-0.jpg', aspect_ratio: 3/4, options: null, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' },
        { id: 'notebook-02', name: 'Personalized Journal', price: 249, image_plain: 'https://i.postimg.cc/8CLrY84N/Flux-Dev-Create-a-professional-visual-layout-featuring-three-h-1.jpg', image_customized: 'https://i.postimg.cc/8CLrY84N/Flux-Dev-Create-a-professional-visual-layout-featuring-three-h-1.jpg', aspect_ratio: 3/4, options: null, preview_style: 'top: 10%; left: 10%; width: 80%; height: 80%;' }
    ];

    // --- GLOBAL STATE & DOM CACHING ---
    let cart = [], currentProduct = null, currentStep = 1, cropper = null, croppedImageDataUrl = null;
    const D = {
        productGrid: document.getElementById('product-grid'), cartBtn: document.getElementById('cart-btn'), cartCount: document.getElementById('cart-count'), toast: document.getElementById('toast-notification'),
        customizer: { modal: document.getElementById('customizer-modal'), title: document.getElementById('customizer-title'), steps: document.querySelectorAll('.customizer-step'), uploadInput: document.getElementById('design-upload'), uploadArea: document.querySelector('.upload-area'), imageToCrop: document.getElementById('image-to-crop'), previewContainer: document.getElementById('preview-container'), previewDesign: document.getElementById('preview-design'), optionsContainer: document.getElementById('dynamic-options-container'), backBtn: document.getElementById('customizer-back-btn'), nextBtn: document.getElementById('customizer-next-btn'), addToCartBtn: document.getElementById('add-to-cart-btn') },
        cart: { modal: document.getElementById('cart-modal'), itemsContainer: document.getElementById('cart-items-container'), emptyMsg: document.getElementById('cart-empty-message'), totalContainer: document.getElementById('cart-total-container'), totalPrice: document.getElementById('cart-total-price'), checkoutBtn: document.getElementById('checkout-btn'), footer: document.getElementById('cart-footer') },
        checkout: { modal: document.getElementById('checkout-modal'), form: document.getElementById('checkout-form'), onlinePaymentDetails: document.getElementById('online-payment-details'), paymentMethodRadios: document.querySelectorAll('input[name="payment-method"]'), transactionIdInput: document.getElementById('transaction-id'), paymentScreenshotInput: document.getElementById('payment-screenshot') },
        whatsapp: { modal: document.getElementById('whatsapp-instruction-modal'), paymentInstruction: document.getElementById('payment-instruction'), continueBtn: document.getElementById('continue-to-whatsapp-btn') }
    };

    function init() {
        D.checkout.onlinePaymentDetails.querySelector('#qr-code-img').src = QR_CODE_IMAGE;
        D.checkout.onlinePaymentDetails.querySelector('#upi-id').textContent = UPI_ID;
        loadProducts(); loadCartFromStorage(); updateCartUI(); addEventListeners();
    }

    function populateModels(brand) {
        const modelSelect = document.getElementById('phone-model-select'), otherModelGroup = document.getElementById('other-model-group'), otherModelInput = document.getElementById('other-model-input');
        if (brand === 'Other') { modelSelect.innerHTML = ''; modelSelect.disabled = true; modelSelect.parentElement.style.display = 'none'; otherModelGroup.style.display = 'block'; otherModelInput.required = true; } 
        else { modelSelect.parentElement.style.display = 'block'; otherModelGroup.style.display = 'none'; otherModelInput.required = false; const models = phoneModelsData[brand] || []; modelSelect.innerHTML = models.map(m => `<option value="${m}">${m}</option>`).join(''); modelSelect.disabled = false; }
    }

    function initCropper() {
        if (cropper) cropper.destroy();
        setTimeout(() => { cropper = new Cropper(D.customizer.imageToCrop, { aspectRatio: currentProduct.aspect_ratio, viewMode: 1, dragMode: 'move', background: false, autoCropArea: 0.8 }); }, 50);
    }
    
    function proceedToPreview() {
        if (!cropper) return;
        croppedImageDataUrl = cropper.getCroppedCanvas({ width: 512, imageSmoothingQuality: 'high' }).toDataURL('image/png');
        D.customizer.previewContainer.style.backgroundImage = `url(${currentProduct.image_plain})`;
        D.customizer.previewDesign.style.backgroundImage = `url(${croppedImageDataUrl})`; D.customizer.previewDesign.style.cssText += currentProduct.preview_style;
        D.customizer.optionsContainer.innerHTML = '';
        if (currentProduct.options) {
            if (currentProduct.options.type === 'phone_model_selector') {
                const brands = Object.keys(phoneModelsData);
                D.customizer.optionsContainer.innerHTML = `<div class="form-group"><label for="phone-brand-select">Select Brand</label><select id="phone-brand-select" class="form-control"><option value="">--- Select a Brand ---</option>${brands.map(b => `<option value="${b}">${b}</option>`).join('')}<option value="Other">Other</option></select></div><div class="form-group"><label for="phone-model-select">Select Model</label><select id="phone-model-select" class="form-control" disabled><option>--- Select Brand First ---</option></select></div><div class="form-group" id="other-model-group" style="display: none;"><label for="other-model-input">Enter Your Model Name</label><input type="text" id="other-model-input" class="form-control" placeholder="e.g., Nokia G20"></div>`;
                document.getElementById('phone-brand-select').addEventListener('change', (e) => populateModels(e.target.value));
            } else if (currentProduct.options.type === 'select') { const { name, values } = currentProduct.options; D.customizer.optionsContainer.innerHTML = `<div class="form-group"><label for="product-option">${name}</label><select id="product-option" class="form-control">${values.map(v => `<option value="${v}">${v}</option>`).join('')}</select></div>`; }
        }
        currentStep = 3; updateStepVisibility();
    }
    
    function addToCart() {
        let selectedOption = null;
        if (currentProduct.options) {
            if (currentProduct.options.type === 'phone_model_selector') {
                const brandSelect = document.getElementById('phone-brand-select'), modelSelect = document.getElementById('phone-model-select'), otherInput = document.getElementById('other-model-input');
                let modelValue = '';
                if (brandSelect.value === 'Other') { if (!otherInput.value.trim()) { alert('Please enter your phone model name.'); return; } modelValue = `Other: ${otherInput.value.trim()}`; }
                else { if (!brandSelect.value || !modelSelect.value) { alert('Please select a brand and model.'); return; } modelValue = `${brandSelect.value} - ${modelSelect.value}`; }
                selectedOption = { name: currentProduct.options.name, value: modelValue };
            } else if (currentProduct.options.type === 'select') { const optionEl = document.getElementById('product-option'); selectedOption = { name: currentProduct.options.name, value: optionEl.value }; }
        }
        const cartItem = { id: `${currentProduct.id}-${Date.now()}`, productId: currentProduct.id, name: currentProduct.name, price: currentProduct.price, customImage: croppedImageDataUrl, option: selectedOption };
        cart.push(cartItem); saveCartToStorage(); updateCartUI(); closeModal(D.customizer.modal); showToast(`${currentProduct.name} added to cart!`);
    }

    function handleCheckout(e) { e.preventDefault(); const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value; D.whatsapp.paymentInstruction.style.display = paymentMethod === 'Online' ? 'block' : 'none'; openModal(D.whatsapp.modal); }
    function finalizeOrderAndRedirect() {
        const customerName = document.getElementById('customer-name').value, customerPhone = document.getElementById('customer-phone').value, customerAddress = document.getElementById('customer-address').value, paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
        let message = `*✨ New Order from Anuradha Printing Press ✨*\n\n*👤 Customer Details:*\nName: ${customerName}\nPhone: ${customerPhone}\nAddress: ${customerAddress}\n\n*🛒 Order Summary:*\n-----------------------------------\n`; let totalAmount = 0;
        cart.forEach((item, index) => { message += `*${index + 1}. ${item.name}*\n`; if (item.option) message += `   - ${item.option.name}: ${item.option.value}\n`; message += `   - Price: ${CURRENCY_SYMBOL}${item.price}\n   - Design: (User will send in chat)\n\n`; totalAmount += item.price; });
        message += `-----------------------------------\n*💰 Total Amount: ${CURRENCY_SYMBOL}${totalAmount}*\n\n*💳 Payment Details:*\nMethod: ${paymentMethod}\n`;
        if (paymentMethod === 'Online') { message += `UTR/Transaction ID: ${D.checkout.transactionIdInput.value}\n_Screenshot will be sent in chat._\n`; }
        const whatsappUrl = `https://wa.me/${BUSINESS_WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
        window.open(whatsappUrl, '_blank');
        cart = []; saveCartToStorage(); updateCartUI(); D.checkout.form.reset();
        closeModal(D.checkout.modal); closeModal(D.cart.modal); closeModal(D.whatsapp.modal);
        showToast("Order details prepared for WhatsApp!");
    }
    
    function loadProducts() { D.productGrid.innerHTML = products.map(p => `<div class="product-card" data-product-id="${p.id}"><div class="product-image-container"><img src="${p.image_plain}" alt="${p.name}" class="product-image product-image-default"><img src="${p.image_customized}" alt="${p.name} Customized" class="product-image product-image-hover"></div><div class="product-info"><div><h3 class="product-name">${p.name}</h3><p class="product-price">${CURRENCY_SYMBOL}${p.price}</p></div><button class="btn btn-primary customize-btn">Customize</button></div></div>`).join(''); }
    const openModal = (modal) => modal.classList.add('active'); const closeModal = (modal) => modal.classList.remove('active');
    function showToast(message) { D.toast.textContent = message; D.toast.classList.add('show'); setTimeout(() => D.toast.classList.remove('show'), 3000); }
    function openCustomizer(productId) { currentProduct = products.find(p => p.id === productId); if (!currentProduct) return; D.customizer.title.textContent = `Customize ${currentProduct.name}`; resetCustomizer(); openModal(D.customizer.modal); }
    function resetCustomizer() { currentStep = 1; updateStepVisibility(); D.customizer.uploadInput.value = ''; if (cropper) { cropper.destroy(); cropper = null; } D.customizer.imageToCrop.src = ''; croppedImageDataUrl = null; D.customizer.optionsContainer.innerHTML = ''; }
    function updateStepVisibility() { D.customizer.steps.forEach(s => s.classList.remove('active')); document.getElementById(`step-${currentStep}`).classList.add('active'); D.customizer.backBtn.style.display = currentStep > 1 ? 'inline-block' : 'none'; D.customizer.nextBtn.style.display = currentStep === 2 ? 'inline-block' : 'none'; D.customizer.addToCartBtn.style.display = currentStep === 3 ? 'inline-block' : 'none'; }
    function handleFileUpload(file) { if (!file || !file.type.startsWith('image/')) return; const reader = new FileReader(); reader.onload = (e) => { D.customizer.imageToCrop.src = e.target.result; currentStep = 2; updateStepVisibility(); initCropper(); }; reader.readAsDataURL(file); }
    function removeFromCart(cartItemId) { cart = cart.filter(item => item.id !== cartItemId); saveCartToStorage(); updateCartUI(D.cart.modal.classList.contains('active')); }
    function updateCartUI(isCartOpen = false) { D.cartCount.textContent = cart.length; D.cartCount.classList.toggle('visible', cart.length > 0); if (isCartOpen) renderCartModal(); }
    function saveCartToStorage() { localStorage.setItem('anuradhaPrintingCart', JSON.stringify(cart)); }
    function loadCartFromStorage() { cart = JSON.parse(localStorage.getItem('anuradhaPrintingCart') || '[]'); }
    function renderCartModal() { if (cart.length === 0) { D.cart.itemsContainer.innerHTML = ''; D.cart.emptyMsg.style.display = 'block'; D.cart.totalContainer.style.display = 'none'; D.cart.footer.style.display = 'none'; } else { D.cart.emptyMsg.style.display = 'none'; D.cart.totalContainer.style.display = 'block'; D.cart.footer.style.display = 'flex'; let totalPrice = 0; D.cart.itemsContainer.innerHTML = cart.map(item => { totalPrice += item.price; return `<div class="cart-item"><img src="${item.customImage}" alt="Customized ${item.name}" class="cart-item-image"><div class="cart-item-details"><div class="cart-item-name">${item.name}</div>${item.option ? `<div class="cart-item-options">${item.option.name}: ${item.option.value}</div>` : ''}<div class="cart-item-price">${CURRENCY_SYMBOL}${item.price}</div></div><button class="btn btn-danger cart-item-remove" data-id="${item.id}">Remove</button></div>`; }).join(''); D.cart.totalPrice.textContent = `${CURRENCY_SYMBOL}${totalPrice}`; } }
    function toggleOnlinePaymentDetails() { const isOnline = D.checkout.paymentMethodRadios[1].checked; D.checkout.onlinePaymentDetails.style.display = isOnline ? 'block' : 'none'; D.checkout.transactionIdInput.required = isOnline; D.checkout.paymentScreenshotInput.required = isOnline; document.querySelector(`label[for="${isOnline ? 'payment-online' : 'payment-cod'}"]`).style.borderColor = 'var(--primary-color)'; document.querySelector(`label[for="${isOnline ? 'payment-cod' : 'payment-online'}"]`).style.borderColor = '#ccc'; }
    function addEventListeners() { D.productGrid.addEventListener('click', e => { const btn = e.target.closest('.customize-btn'); if (btn) openCustomizer(btn.closest('.product-card').dataset.productId); }); document.querySelectorAll('.modal-close').forEach(btn => btn.addEventListener('click', () => closeModal(document.getElementById(btn.dataset.close)))); D.customizer.uploadInput.addEventListener('change', (e) => handleFileUpload(e.target.files[0])); ['dragenter', 'dragover', 'dragleave'].forEach(evt => D.customizer.uploadArea.addEventListener(evt, e => { e.preventDefault(); e.stopPropagation(); })); D.customizer.uploadArea.addEventListener('drop', e => { e.preventDefault(); e.stopPropagation(); if (e.dataTransfer.files.length) handleFileUpload(e.dataTransfer.files[0]); }); D.customizer.nextBtn.addEventListener('click', proceedToPreview); D.customizer.backBtn.addEventListener('click', () => { currentStep--; updateStepVisibility(); }); D.customizer.addToCartBtn.addEventListener('click', addToCart); D.cartBtn.addEventListener('click', () => { renderCartModal(); openModal(D.cart.modal); }); D.cart.itemsContainer.addEventListener('click', e => { const btn = e.target.closest('.cart-item-remove'); if (btn) removeFromCart(btn.dataset.id); }); D.cart.checkoutBtn.addEventListener('click', () => { closeModal(D.cart.modal); openModal(D.checkout.modal); }); D.checkout.paymentMethodRadios.forEach(radio => radio.addEventListener('change', toggleOnlinePaymentDetails)); D.checkout.form.addEventListener('submit', handleCheckout); D.whatsapp.continueBtn.addEventListener('click', finalizeOrderAndRedirect); toggleOnlinePaymentDetails(); }
    
    init();
});
</script>

</body>
</html>
